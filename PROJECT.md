# HGG-TopK é¡¹ç›®æ–‡ä»¶è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
HGG-TopK-Training/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                 ä¸»æ–‡æ¡£ï¼ˆé‡ç‚¹é˜…è¯»ï¼‰
â”œâ”€â”€ ğŸ“„ QUICKSTART.md             5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
â”œâ”€â”€ ğŸ“„ requirements.txt          Pythonä¾èµ–
â”œâ”€â”€ â­ run.py                    ä¸€é”®è¿è¡Œè„šæœ¬ï¼ˆæ¨èä½¿ç”¨ï¼‰
â”‚
â”œâ”€â”€ ğŸ“¦ core/                     æ ¸å¿ƒç®—æ³•ä»£ç 
â”‚   â”œâ”€â”€ compression.py           æ‰€æœ‰å‹ç¼©ç®—æ³•ï¼ˆTopK/Gaussian/RedSync/HGG-TopKï¼‰
â”‚   â”œâ”€â”€ hgg_pipeline.py          HGG-TopKå¼‚æ­¥æµæ°´çº¿å®ç°
â”‚   â””â”€â”€ models.py                LSTMæ¨¡å‹å®šä¹‰
â”‚
â”œâ”€â”€ ğŸ“¦ trainers/                 è®­ç»ƒå™¨
â”‚   â””â”€â”€ trainer.py               ç»Ÿä¸€è®­ç»ƒå™¨ï¼ˆæ”¯æŒæ‰€æœ‰æ¨¡å‹å’Œå‹ç¼©ç®—æ³•ï¼‰
â”‚
â”œâ”€â”€ ğŸ“¦ data_utils/               æ•°æ®å¤„ç†å·¥å…·
â”‚   â””â”€â”€ ptb_reader.py            PTBæ•°æ®é›†è¯»å–å™¨
â”‚
â”œâ”€â”€ ğŸ“¦ visualization/            å¯è§†åŒ–å·¥å…·
â”‚   â””â”€â”€ visualizer.py            å›¾è¡¨ç”Ÿæˆå™¨ï¼ˆè‡ªåŠ¨ç”ŸæˆPDFå›¾è¡¨ï¼‰
â”‚
â”œâ”€â”€ ğŸ“¦ experiments/              é¢„è®¾å®éªŒè„šæœ¬
â”‚   â”œâ”€â”€ quick_test.py            å¿«é€Ÿæµ‹è¯•ï¼ˆ10 epochsï¼‰
â”‚   â”œâ”€â”€ compare_all_methods.py  å¯¹æ¯”æ‰€æœ‰å‹ç¼©æ–¹æ³•
â”‚   â””â”€â”€ test_pipeline.py         æµæ°´çº¿å¯¹æ¯”å®éªŒ
â”‚
â”œâ”€â”€ ğŸ“‚ data/                     æ•°æ®ç›®å½•ï¼ˆé¦–æ¬¡è¿è¡Œè‡ªåŠ¨åˆ›å»ºï¼‰
â”œâ”€â”€ ğŸ“‚ logs/                     æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨ç”ŸæˆJSONç»“æœï¼‰
â””â”€â”€ ğŸ“‚ figures/                  å›¾è¡¨ç›®å½•ï¼ˆè‡ªåŠ¨ç”ŸæˆPDFå›¾è¡¨ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„æ–¹å¼ï¼š
```bash
python run.py
```

é€‰æ‹©èœå•ä¸­çš„å®éªŒå³å¯ã€‚

### æˆ–ç›´æ¥è¿è¡Œï¼š
```bash
# å¿«é€Ÿæµ‹è¯•
python experiments/quick_test.py

# å•æ¬¡è®­ç»ƒ
python trainers/trainer.py --model resnet18 --dataset cifar10 --epochs 50 --compressor hggtopk --density 0.05

# ç”Ÿæˆå›¾è¡¨
python visualization/visualizer.py
```

## ğŸ“– æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1. run.py ï¼ˆâ­æ¨èä½¿ç”¨ï¼‰
- äº¤äº’å¼èœå•ç•Œé¢
- é›†æˆæ‰€æœ‰å®éªŒ
- æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼

### 2. trainers/trainer.py ï¼ˆæ ¸å¿ƒè®­ç»ƒå™¨ï¼‰
- æ”¯æŒResNet18/50, VGG11/16, LSTM
- æ”¯æŒæ‰€æœ‰å‹ç¼©ç®—æ³•
- è¯¦ç»†æ€§èƒ½æµ‹é‡
- å‘½ä»¤è¡Œå‚æ•°ä¸°å¯Œ

### 3. core/compression.py ï¼ˆæ ¸å¿ƒç®—æ³•ï¼‰
- 5ç§å‹ç¼©ç®—æ³•å®ç°
- HGG-TopK: O(N)æ—¶é—´å¤æ‚åº¦
- å¯è°ƒè¶…å‚æ•°: NUM_BINS, GAMMA

### 4. core/hgg_pipeline.py ï¼ˆæµæ°´çº¿ï¼‰
- åŒCUDAæµå¼‚æ­¥æ‰§è¡Œ
- é™ä½ç¨€ç–åŒ–å¼€é”€
- æ€§èƒ½profiling

### 5. visualization/visualizer.py ï¼ˆå¯è§†åŒ–ï¼‰
- è‡ªåŠ¨ç”Ÿæˆ3ç§PDFå›¾è¡¨
- ç§‘ç ”çº§è´¨é‡ï¼ˆ300 DPIï¼‰
- å¤šç»´åº¦æ€§èƒ½åˆ†æ

## ğŸ§ª é¢„è®¾å®éªŒ

| å®éªŒ | è„šæœ¬ | æ—¶é—´ | è¯´æ˜ |
|------|------|------|------|
| å¿«é€Ÿæµ‹è¯• | `experiments/quick_test.py` | ~30åˆ†é’Ÿ | éªŒè¯ç¯å¢ƒï¼Œ3ä¸ª10-epochå®éªŒ |
| æ–¹æ³•å¯¹æ¯” | `experiments/compare_all_methods.py` | ~5å°æ—¶ | å¯¹æ¯”5ç§å‹ç¼©æ–¹æ³• |
| æµæ°´çº¿æµ‹è¯• | `experiments/test_pipeline.py` | ~6å°æ—¶ | æµæ°´çº¿æ•ˆæœéªŒè¯ |

## ğŸ“Š è¾“å‡ºè¯´æ˜

### æ—¥å¿—æ–‡ä»¶ï¼ˆlogs/ï¼‰
- JSONæ ¼å¼
- åŒ…å«å®Œæ•´è®­ç»ƒè®°å½•
- è¯¦ç»†æ€§èƒ½æ•°æ®

### å›¾è¡¨æ–‡ä»¶ï¼ˆfigures/ï¼‰
- training_curves.pdfï¼šè®­ç»ƒæ›²çº¿
- performance_comparison.pdfï¼šæ€§èƒ½å¯¹æ¯”
- pipeline_comparison.pdfï¼šæµæ°´çº¿å¯¹æ¯”

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡ä½¿ç”¨**ï¼šè¿è¡Œ `python run.py`ï¼Œé€‰æ‹©å¿«é€Ÿæµ‹è¯•
2. **å¯¹æ¯”å®éªŒ**ï¼šä½¿ç”¨ `experiments/compare_all_methods.py`
3. **è‡ªå®šä¹‰å®éªŒ**ï¼šä½¿ç”¨ `trainers/trainer.py` å‘½ä»¤è¡Œå‚æ•°
4. **æŸ¥çœ‹ç»“æœ**ï¼šè¿è¡Œ `visualization/visualizer.py`

## âš™ï¸ ä¸»è¦å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| --model | resnet18 | æ¨¡å‹æ¶æ„ |
| --dataset | cifar10 | æ•°æ®é›† |
| --epochs | 100 | è®­ç»ƒè½®æ•° |
| --compressor | None | å‹ç¼©å™¨ï¼ˆtopk/gaussian/redsync/hggtopkï¼‰ |
| --density | 1.0 | æ¢¯åº¦å¯†åº¦ï¼ˆ0.05æ¨èï¼‰ |
| --use-pipeline | False | å¯ç”¨æµæ°´çº¿ï¼ˆä»…HGG-TopKï¼‰ |
| --batch-size | 128 | æ‰¹å¤§å° |

## ğŸ“§ è·å–å¸®åŠ©

1. æŸ¥çœ‹ README.md å®Œæ•´æ–‡æ¡£
2. æŸ¥çœ‹ QUICKSTART.md å¿«é€ŸæŒ‡å—
3. æŸ¥çœ‹ä»£ç æ³¨é‡Š
4. è¿è¡Œ `python experiments/quick_test.py` éªŒè¯ç¯å¢ƒ

---

**æç¤º**: é¡¹ç›®å·²ä¼˜åŒ–ä¸ºæœ€ç®€ç»“æ„ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½å¯é€šè¿‡ `run.py` è®¿é—®ï¼
